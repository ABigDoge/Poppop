#include <stdio.h> 
#include <string.h> 
#include <errno.h> 
#include <sys/socket.h> 
#include <resolv.h> 
#include <stdlib.h> 
#include <netinet/in.h> 
#include <arpa/inet.h> 
#include <unistd.h>

#define SERVER_PORT 8088 // 端口
#define MAX_BUF 1024 // 缓冲区大小

// 主函数
int main(int argc, char *argv[]) 
{ 
    int sockfd;
    struct sockaddr_in client_addr;
    struct pthread_data pdata;

    bzero(&client_addr, sizeof(client_addr));
    client_addr.sin_family = AF_INET;
    client_addr.sin_port = htons(SERVER_PORT);

    if(inet_aton(argv[1], (struct in_addr*) &client_addr.sin_addr.s_addr) == 0)
        ErrorHandling(argv[1]);

    // 采用TCP协议
    if((sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
        ErrorHandling("Socekt error");
    puts("socket created");

    // 连接
    if(connect(sockfd, (struct sockaddr*) &client_addr, sizeof(client_addr))==-1)
        ErrorHandling("Connect error");
    puts("server connected");

    close(sockfd); 
    return 0; 
}
